<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Smart Crop Advisor</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet"/>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>üå± Smart Crop Advisor</h1>
    <nav>
      <a onclick="openHomeSlide()">Home</a>
      <a href="#form">Suggest</a>
      <a href="#info">Crops Info</a>
      <a href="#">About</a>
    </nav>
  </header>

  <!-- Home Slide Panel -->
  <section class="home-info-slide" id="homeSlide">
    <div class="home-info-content">
      <h2>About Smart Crop Advisor</h2>
      <p>Smart Crop Advisor is a free tool designed to help you pick the right crops to grow based on soil, season, and market insights.</p>
      <p>üå± <strong>Purpose:</strong> Empower farmers to grow crops that are profitable and sustainable.</p>
      <p>üìà <strong>Why:</strong> Use data-driven decisions instead of guesswork for better harvests and incomes.</p>
      <p>üõ† <strong>How to Use:</strong> Select your soil type and current season ‚Äî and get instant recommendations with live price trends.</p>
      <button onclick="closeHomeSlide()">Close</button>
    </div>
  </section>

  <section class="hero">
    <h2>Grow Smarter, Not Harder üåæ</h2>
    <p>Discover the best crops to grow in your soil and season ‚Äî with live market insights and clear advice.</p>
  </section>

  <section class="form-section" id="form">
    <label for="soil">Select Soil Type:</label>
    <select id="soil">
      <option value="">-- Choose Soil --</option>
      <option value="Loamy">Loamy</option>
      <option value="Clay">Clay</option>
      <option value="Sandy">Sandy</option>
      <option value="Black">Black</option>
    </select>

    <label for="season">Select Season:</label>
    <select id="season">
      <option value="">-- Choose Season --</option>
      <option value="Summer">Summer</option>
      <option value="Monsoon">Monsoon</option>
      <option value="Winter">Winter</option>
    </select>

    <button onclick="getRecommendation()">Suggest Crop</button>

    <div class="result" id="output"></div>

    <div class="chart-container">
      <canvas id="trendChart" width="400" height="200"></canvas>
    </div>

    <div class="price-table">
      <h3>üìä Market Rate Changes (Static Example)</h3>
      <table>
        <tr>
          <th>Crop</th>
          <th>Jan Price (‚Çπ/kg)</th>
          <th>Apr Price (‚Çπ/kg)</th>
          <th>Change</th>
        </tr>
        <tr>
          <td>Tomato</td>
          <td>20</td>
          <td>28</td>
          <td>üìà +40%</td>
        </tr>
        <tr>
          <td>Rice</td>
          <td>32</td>
          <td>30</td>
          <td>üìâ -6.2%</td>
        </tr>
        <tr>
          <td>Carrot</td>
          <td>25</td>
          <td>35</td>
          <td>üìà +40%</td>
        </tr>
        <tr>
          <td>Cotton</td>
          <td>45</td>
          <td>52</td>
          <td>üìà +15.5%</td>
        </tr>
      </table>
    </div>
  </section>

  <section class="info-section" id="info">
    <h3>üåæ Common Crops and Their Requirements</h3>
    <p><strong>Tomato:</strong> Needs warm weather, loamy soil, and grows well in summer.</p>
    <p><strong>Rice:</strong> Requires clay soil and heavy rainfall during monsoon.</p>
    <p><strong>Carrot:</strong> Prefers sandy soil, suitable for cooler winters.</p>
    <p><strong>Cotton:</strong> Black soil with good moisture, ideal for monsoon.</p>
    <p><strong>Maize:</strong> Grows in diverse conditions and adaptable to different soils.</p>
  </section>

  <footer>
    &copy; 2025 Smart Crop Advisor. Designed for future farming. üåç
  </footer>

  <script>
    const cropImages = {
      Tomato: "https://images2.alphacoders.com/110/thumb-1920-1106600.jpg",
      Rice: "https://www.learnreligions.com/thmb/5VvWl15le3qQhn33Pu2K0qoh26k=/750x0/filters:no_upscale():max_bytes(150000):strip_icc():format(webp)/GettyImages-682901474-5c6450dcc9e77c0001566eab.jpg",
      Carrot: "https://i5.walmartimages.com/seo/Tendersweet-Carrot-Seeds-5-Lb-Non-GMO-Heirloom-Vegetable-Garden-Seeds-Gardening-by-Mountain-Valley-Seeds_e66fb972-b06a-4e45-bde6-a20a07f466a4_1.1885534e934f61f2cca9f3e15535ce53.jpeg",
      Cotton: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjWYmW9pgI_y_NDCxGs6lB8LpSZbe8MEnmIiA410lPjOCHW8fPlsW1vld1Q-_ol5-X_RIia4G9jUP8-TJEC9rpNmbWQy4lQem4CsC37DDdXZ70ZUiyLEhVhTJoMg2F_RxW0qqMYjSdJxJs/s400/Cotton.jpg",
      Maize: "https://bolbel.com/wp-content/uploads/2018/06/Maize.jpg"
    };

    function getRecommendation() {
      const soil = document.getElementById("soil").value;
      const season = document.getElementById("season").value;
      const output = document.getElementById("output");

      if (!soil || !season) {
        output.innerHTML = "‚ö† Please select both soil and season.";
        return;
      }

      let crop = "";
      let reason = "";

      if (soil === "Loamy" && season === "Summer") {
        crop = "Tomato";
        reason = "Loamy soil is rich in nutrients and tomatoes thrive in summer heat.";
      } else if (soil === "Clay" && season === "Monsoon") {
        crop = "Rice";
        reason = "Clay retains water, perfect for water-loving rice in the rainy season.";
      } else if (soil === "Sandy" && season === "Winter") {
        crop = "Carrot";
        reason = "Carrots love the drainage of sandy soil and the cool of winter.";
      } else if (soil === "Black" && season === "Monsoon") {
        crop = "Cotton";
        reason = "Black soil holds moisture well, which cotton needs in monsoon.";
      } else {
        crop = "Maize";
        reason = "Maize is adaptable and fits your soil and season combination well.";
      }

      output.innerHTML = `
        <strong>Suggested Crop:</strong> ${crop}<br><br>
        <strong>Reason:</strong> ${reason}<br>
        <img class="crop-image" src="${cropImages[crop]}" alt="${crop}">
      `;

      updateChart(crop);
      fetchMarketPrice(crop);
    }

    function updateChart(crop) {
      const cropTrends = {
        Tomato: [20, 22, 25, 28],
        Rice: [32, 31, 30.5, 30],
        Carrot: [25, 30, 33, 35],
        Cotton: [45, 48, 50, 52],
        Maize: [18, 19, 19.5, 20]
      };

      const ctx = document.getElementById('trendChart').getContext('2d');
      if (window.myChart) window.myChart.destroy();

      window.myChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: ['Jan', 'Feb', 'Mar', 'Apr'],
          datasets: [{
            label: `${crop} Market Price (‚Çπ/kg)`,
            data: cropTrends[crop],
            borderColor: '#2d6a4f',
            backgroundColor: '#74c69d66',
            tension: 0.3,
            fill: true
          }]
        },
        options: {
          responsive: true,
          scales: {
            y: {
              beginAtZero: false
            }
          }
        }
      });
    }

    async function fetchMarketPrice(cropName) {
      const apiKey = "579b464db66ec23bdd0000017f070ea9c3d5432945f2974fe8d3133f";
      const resourceId = "9ef84268-d588-465a-a308-a864a43d0070";

      const url = `https://api.data.gov.in/resource/${resourceId}?api-key=${apiKey}&format=json&limit=5&filters[commodity]=${cropName}`;

      try {
        const response = await fetch(url);
        const data = await response.json();

        if (data.records && data.records.length > 0) {
          const prices = data.records.map(item => (
            `${item.arrival_date} ‚Äî ${item.market}: ‚Çπ${item.modal_price}/quintal`
          )).join("<br>");

          document.getElementById("output").innerHTML += `
            <br><br><strong>üìà Latest Real Market Prices:</strong><br>${prices}
          `;
        } else {
          document.getElementById("output").innerHTML += `
            <br><br><strong>No real-time price data available for ${cropName}.</strong>
          `;
        }
      } catch (error) {
        document.getElementById("output").innerHTML += `
          <br><br><strong>‚ö† Could not fetch real prices. Check API key or network.</strong>
        `;
      }
    }

    function openHomeSlide() {
      document.getElementById("homeSlide").classList.add("active");
    }

    function closeHomeSlide() {
      document.getElementById("homeSlide").classList.remove("active");
    }
  </script>
</body>
</html>
